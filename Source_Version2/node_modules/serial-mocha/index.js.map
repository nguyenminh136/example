{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["/**\n * module index\n *\n */\n'use strict';\nvar Promise = require(\"bluebird\"),\n\tfs = Promise.promisifyAll(require(\"fs\")),\n\tchild_process = Promise.promisifyAll(require(\"child_process\")),\n\tutil = require(\"util\"),\n\targv = require(\"minimist\")(process.argv),\n\tSPR = require(\"./lib/serialPromiseRunner\"),\n\tminimist = require(\"minimist\"),\n\tpath = require(\"path\"),\n\tcolors = require(\"colors/safe\"),\n\t\tlevel=0,\n\t\tindent=\"\\t\";\n\n\tvar walkObject = (obj,level)=> {\n\t\tlet theIndent=\"\";\n\t\tfor(let i=0;i<level;i++) {\n\t\t\ttheIndent += indent;\n\t\t}\n\t\tif (obj.file) {\n\t\t\t\tconsole.log(theIndent+\"File: \"+ obj.file);\n\t\t\t}\n\t\tif (obj.suite) {\n\t\t\tconsole.log(theIndent+\"Suite: \"+ obj.suite);\n\t\t}\n\t\tif (obj.tests) {\n\t\t\tobj.tests.forEach((test)=>{\n\t\t\t\t//console.log(test.test.title);\n\t\t\t\t//console.log(test.test.status);\n\t\t\t\t//console.log(test.error);\n\t\t\t\tconsole.log(theIndent+indent+\"Test: \"+test.test.title+ \"  \"+test.test.status + ((test.error)?\" Reason: \"+test.error:\"\"));\n\t\t\t})\n\t\t}\n\t\tif (obj.suites) {\n\t\t\tobj.suites.forEach((suite)=> {\n\t\t\t\t//if(obj.suite){\n\t\t\t\t//\tconsole.log(obj.suite +\" Nested Suites:\");\n\t\t\t\t//}\n\t\t\t\twalkObject(suite,level+1);\n\t\t\t});\n\t\t}\n\t}\nmodule.exports.runTasks = (theTasks, theReporter, saveData)=> new Promise((resolve, reject)=> {\n\tlet theArgs = minimist(process.argv.slice(2));\n\tif(theArgs.reporter){\n\t\ttry{\n\t\t\tlet _t= require(path.resolve(theArgs.reporter));\n\t\t\ttheReporter=path.resolve(theArgs.reporter);\n\t\t}catch(ex){\n\t\t\t//purposely silent\n\n\t\t}\n\t}\n\tif (!theReporter) {\n\t\ttheReporter = void(0);\n\t}\n\ttheTasks = theTasks || theArgs._;\n\tif (saveData === void(0)) {\n\t\tif (theArgs.sm !== void(0)) {\n\t\t\tif (typeof theArgs.sm === 'boolean') {\n\t\t\t\tsaveData = theArgs.sm;\n\t\t\t} else if (typeof theArgs.sm === 'string') {\n\t\t\t\tsaveData = (theArgs.sm.toLowerCase() === 'true') || (theArgs.sm.toLowerCase() === 't') || (theArgs.sm.toLowerCase() === 'yes') || (theArgs.sm.toLowerCase() === 'y')\n\t\t\t}\n\t\t}\n\t\tif (saveData === void(0)) {\n\t\t\tsaveData = false;\n\t\t}\n\t}\n\tlet tasks = [];\n\tlet results = {\n\t}\n\ttheTasks.forEach((test)=> {\n\t\ttasks.push({\n\t\t\tname : test,\n\t\t\targs : [test, theReporter, saveData],\n\t\t\tfunct: require(\"./lib/runFork\")\n\t\t});\n\t});\n\tlet spr = new SPR(tasks);\n\tspr.runTasks()\n\t\t.then((res)=> {\n\n\t\t\t//console.log(util.inspect(res,{depth:null}));\n\t\t\tif(!saveData){\n\t\t\t\tres=null;\n\t\t\t}\n\t\t\tif(res && !theReporter){\n\t\t\t\tfor (let file in res){\n\t\t\t\twalkObject(res[file].results,0);\n\t\t\t\t}\n\t\t\t\t//console.log(walkObject(res.results));\n\t\t\t}\n\t\t\tresolve(res);\n\t\t})\n\t\t.catch(reject)\n\t\t.finally(()=>spr = void(0));\n})\n\nif ((argv._.length > 1) && argv._[1].indexOf(\"index.js\") !== -1) {\n\tmodule.exports.runTasks()\n\t\t.then((results)=> {\n\t\tconsole.log(\"finished with\",results )})\n\t\t.catch((err)=>console.log(err, err.stack));\n}"],"sourceRoot":"/source/"}